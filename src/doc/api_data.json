[  {    "type": "get",    "url": "/api/trial/:tid",    "title": "Trial Details",    "name": "GetTrial",    "version": "0.1.0",    "group": "Admin",    "permission": [      {        "name": "admin"      }    ],    "header": {      "fields": {        "Header": [          {            "group": "Header",            "type": "String",            "optional": false,            "field": "Authorization",            "description": "<p>Admin's <code>access_token</code>.</p>"          }        ]      },      "examples": [        {          "title": "Header-Example:",          "content": "{\n  \"Authorization\": \"Bearer abc...xyz\"\n}",          "type": "String"        }      ]    },    "success": {      "fields": {        "Success 200": [          {            "group": "Success 200",            "type": "Object[]",            "optional": false,            "field": "trials",            "description": "<p>User's <code>Trials</code>.</p>"          }        ]      },      "examples": [        {          "title": "Success-Response:",          "content": "HTTP/1.1 200 OK\n[{\n  \"tid\": \"xxxx\",\n  \"title\": \"Test Trial\",\n  \"regopen\": \"0000-00-00 00:00:00\",\n  \"regclose\": \"0000-00-00 00:00:00\",\n  \"trialstart\": \"0000-00-00 00:00:00\",\n  \"trialend\": \"0000-00-00 00:00:00\",\n  \"trialtype\": \"simple\",\n  \"timezone\": \"TZ database name\",\n  \"created\": \"0000-00-00 00:00:00\",\n  \"updated\": \"0000-00-00 00:00:00\",\n  \"groups\": [{\n      \"gid\": ...,\n      \"name\": ...,\n      \"size\": ...,\n      \"size_n\": ...\n  },...],\n  \"surveys\": [{\n    \"sid\": ...,\n    \"name\": ...,\n    \"groups: \"[gid,...]\",\n    \"pre\": bool,\n    \"during\": bool,\n    \"post\": bool,\n    \"interval\": number,\n    \"frequency\": [days|weeks|months],\n    \"questions\": [{\n      \"qid\": ...,\n      \"text\": ...,\n      \"type\": ...,\n      \"options\": ...\n    },...]\n  },...]\n},...]",          "type": "json"        }      ]    },    "description": "<p>Returns the complete details for a given Trial ID.</p>",    "filename": "./index.php",    "groupTitle": "Admin"  },  {    "type": "get",    "url": "/api/user/details",    "title": "User Details",    "name": "GetUserDetails",    "version": "0.1.0",    "group": "Admin",    "permission": [      {        "name": "admin"      }    ],    "header": {      "fields": {        "Header": [          {            "group": "Header",            "type": "String",            "optional": false,            "field": "Authorization",            "description": "<p>Admin's <code>access_token</code>.</p>"          }        ]      },      "examples": [        {          "title": "Header-Example:",          "content": "{\n  \"Authorization\": \"Bearer abc...xyz\"\n}",          "type": "String"        }      ]    },    "success": {      "fields": {        "Success 200": [          {            "group": "Success 200",            "type": "String",            "optional": false,            "field": "uid",            "description": "<p>User's unique ID.</p>"          },          {            "group": "Success 200",            "type": "String",            "optional": false,            "field": "email",            "description": "<p>User's email address.</p>"          },          {            "group": "Success 200",            "type": "String",            "optional": false,            "field": "name",            "description": "<p>User's name.</p>"          },          {            "group": "Success 200",            "type": "String",            "optional": false,            "field": "role",            "description": "<p>User's role.</p>"          }        ]      },      "examples": [        {          "title": "Success-Response:",          "content": "HTTP/1.1 200 OK\n{\n  \"uid\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n  \"email\": \"user@mail.ca\",\n  \"name\": \"Reece Ercher\",\n  \"role\": \"admin\"\n}",          "type": "json"        }      ]    },    "error": {      "fields": {        "Error 4xx": [          {            "group": "Error 4xx",            "optional": false,            "field": "AccessDenied",            "description": "<p>The <code>access_token</code> provided has expired.</p>"          }        ]      },      "examples": [        {          "title": "Error-Response:",          "content": "HTTP/1.1 401 Unauthorized\n{\n  \"error\": \"access_denied\",\n  \"message\": \"The resource owner or authorization server denied the request.\",\n  \"hint\": \"Access token is invalid\"\n}",          "type": "json"        }      ]    },    "description": "<p>Returns user details based on the provided OAuth token.</p>",    "filename": "./index.php",    "groupTitle": "Admin"  },  {    "type": "get",    "url": "/api/user/trials",    "title": "List Trials",    "name": "GetUserTrials",    "version": "0.1.0",    "group": "Admin",    "permission": [      {        "name": "admin"      }    ],    "header": {      "fields": {        "Header": [          {            "group": "Header",            "type": "String",            "optional": false,            "field": "Authorization",            "description": "<p>Admin's <code>access_token</code>.</p>"          }        ]      },      "examples": [        {          "title": "Header-Example:",          "content": "{\n  \"Authorization\": \"Bearer abc...xyz\"\n}",          "type": "String"        }      ]    },    "success": {      "fields": {        "Success 200": [          {            "group": "Success 200",            "type": "Object[]",            "optional": false,            "field": "trials",            "description": "<p>User's <code>Trials</code>.</p>"          }        ]      },      "examples": [        {          "title": "Success-Response:",          "content": "HTTP/1.1 200 OK\n[{\n  \"tid\": \"xxxx\",\n  \"title\": \"Test Trial\",\n  \"regopen\": \"0000-00-00 00:00:00\",\n  \"regclose\": \"0000-00-00 00:00:00\",\n  \"trialstart\": \"0000-00-00 00:00:00\",\n  \"trialend\": \"0000-00-00 00:00:00\",\n  \"timezone\": \"TZ database name\",\n  \"created\": \"0000-00-00 00:00:00\",\n  \"updated\": \"0000-00-00 00:00:00\"\n}...]",          "type": "json"        }      ]    },    "description": "<p>Returns an array of <code>Trials</code> belonging to the current Admin.</p>",    "filename": "./index.php",    "groupTitle": "Admin"  },  {    "type": "post",    "url": "/api/new/trial",    "title": "New Trial",    "name": "PostNewTrial",    "version": "0.1.0",    "group": "Admin",    "permission": [      {        "name": "admin"      }    ],    "parameter": {      "fields": {        "Parameter": [          {            "group": "Parameter",            "type": "Object",            "optional": false,            "field": "trial",            "description": "<p>Object representing the new <code>Trial</code>.</p>"          }        ]      },      "examples": [        {          "title": "Request-Example:",          "content": "{\n  \"title\": \"Mental Health Trial\",\n  \"regopen\":\"2019-01-07T05:00:00.000Z\",\n  \"regclose\":\"2019-01-14T05:00:00.000Z\",\n  \"trialstart\":\"2019-01-14T05:00:00.000Z\",\n  \"trialend\":\"2019-01-18T05:00:00.000Z\",\n  \"trialtype\":\"simple\",\n  \"groups\":[{\n    \"group_id\":0,\n    \"group_name\":\"Control\",\n    \"group_size\":\"auto\",\n    \"group_size_n\":\"\"\n  },{\n    \"group_id\":1,\n    \"group_name\":\"Experiment\",\n    \"group_size\":\"auto\",\n    \"group_size_n\":\"\"\n  }],\n  \"features\":[],\n  \"surveys\":[{\n    \"survey_id\":0,\n    \"survey_name\":\"Demographics\",\n    \"survey_groups\":[0,1],\n    \"survey_pre\":\"1\",\n    \"survey_during\":\"0\",\n    \"survey_post\":\"0\",\n    \"survey_interval\":\"1\",\n    \"survey_frequency\":\"days\",\n    \"survey_questions\":[{\n      \"question_id\":0,\n      \"question_text\":\"What's your age?\",\n      \"question_type\":\"mc\",\n      \"question_options\":\"under 20|20-30|30-40|40-50|50+\"\n    },{\n      \"question_id\":2,\n      \"question_text\":\"What's your major?\",\n      \"question_type\":\"text\",\n      \"question_options\":\"\"\n    },...]\n  },...],\n  \"timezone\":\"America/Toronto\"}\n}",          "type": "Object"        }      ]    },    "header": {      "fields": {        "Header": [          {            "group": "Header",            "type": "String",            "optional": false,            "field": "Authorization",            "description": "<p>Admin's <code>access_token</code>.</p>"          }        ]      },      "examples": [        {          "title": "Header-Example:",          "content": "{\n  \"Authorization\": \"Bearer abc...xyz\"\n}",          "type": "String"        }      ]    },    "success": {      "fields": {        "Success 200": [          {            "group": "Success 200",            "type": "String",            "optional": false,            "field": "tid",            "description": "<p>A unique 4-character string representing this trial.</p>"          },          {            "group": "Success 200",            "type": "number",            "optional": false,            "field": "groups",            "description": "<p>The number of groups that is recorded.</p>"          },          {            "group": "Success 200",            "type": "number",            "optional": false,            "field": "surveys",            "description": "<p>The number of surveys that are recorded.</p>"          },          {            "group": "Success 200",            "type": "number",            "optional": false,            "field": "questions",            "description": "<p>The number of questions that are recorded.</p>"          }        ]      },      "examples": [        {          "title": "Success-Response:",          "content": "HTTP/1.1 200 OK\n{\n  \"tid\": \"xxxx\",\n  \"groups\": number,\n  \"surveys\": number,\n  \"questions\": number,\n}",          "type": "json"        }      ]    },    "filename": "./index.php",    "groupTitle": "Admin"  },  {    "type": "post",    "url": "/api/validate/login",    "title": "Refresh Token",    "name": "PostRefreshToken",    "version": "0.1.0",    "group": "Admin",    "parameter": {      "fields": {        "Parameter": [          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "refresh_token",            "description": "<p>Admin's <code>refresh_token</code> issued with an earlier <code>/login</code> call.</p>"          },          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "client_id",            "description": "<p><code>rctrials.tk</code></p>"          },          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "client_secret",            "description": "<p><code>doascience</code></p>"          },          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "scope",            "description": "<p><code>basic</code></p>"          },          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "grant_type",            "description": "<p><code>refresh_token</code></p>"          }        ]      }    },    "success": {      "fields": {        "Success 200": [          {            "group": "Success 200",            "type": "String",            "optional": false,            "field": "token_type",            "description": "<p>The value <code>Bearer</code>.</p>"          },          {            "group": "Success 200",            "type": "Number",            "optional": false,            "field": "expires_in",            "description": "<p>An integer representing the TTL of the access token.</p>"          },          {            "group": "Success 200",            "type": "String",            "optional": false,            "field": "access_token",            "description": "<p>A JWT signed with the authorization server’s private key.</p>"          },          {            "group": "Success 200",            "type": "String",            "optional": false,            "field": "refresh_token",            "description": "<p>An encrypted payload that can be used to refresh the access token when it expires.</p>"          }        ]      },      "examples": [        {          "title": "Success-Response:",          "content": "HTTP/1.1 200 OK\n{\n  \"token_type\": \"Bearer\",\n  \"expires_in\": 3600,\n  \"access_token\": \"abc...xyz\",\n  \"refresh_token\": \"abc...xyz\"\n}",          "type": "json"        }      ]    },    "error": {      "fields": {        "Error 4xx": [          {            "group": "Error 4xx",            "optional": false,            "field": "InvalidCredentials",            "description": "<p>The <code>username</code> or <code>password</code> provided are incorrect.</p>"          }        ]      },      "examples": [        {          "title": "Error-Response:",          "content": "HTTP/1.1 401 Unauthorized\n{\n  \"error\": \"invalid_request\",\n  \"message\": \"The refresh token is invalid.\",\n  \"hint\": \"Cannot decrypt the refresh token\"\n}",          "type": "json"        }      ]    },    "description": "<p>Validates login credentials and returns OAuth access and refresh tokens.</p>",    "filename": "./index.php",    "groupTitle": "Admin"  },  {    "type": "post",    "url": "/api/register",    "title": "New User",    "name": "PostRegister",    "version": "0.1.0",    "group": "Admin",    "parameter": {      "fields": {        "Parameter": [          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "email",            "description": "<p>New User's email address.</p>"          },          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "pass",            "description": "<p>New User's password.</p>"          },          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "name",            "description": "<p>New User's name.</p>"          }        ]      }    },    "success": {      "fields": {        "Success 200": [          {            "group": "Success 200",            "type": "String",            "optional": false,            "field": "id",            "description": "<p>A Unique ID for the Admin.</p>"          }        ]      },      "examples": [        {          "title": "Success-Response:",          "content": "HTTP/1.1 200 OK\n{\n  \"id\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\"\n}",          "type": "json"        }      ]    },    "error": {      "fields": {        "Error 4xx": [          {            "group": "Error 4xx",            "optional": false,            "field": "EmailExists",            "description": "<p>The <code>email</code> provided already exists in the system.</p>"          }        ]      },      "examples": [        {          "title": "Error-Response:",          "content": "HTTP/1.1 409 Conflict\n{\n  \"message\": \"Email xxx@xxx.xx already exists.\"\n}",          "type": "json"        }      ]    },    "description": "<p>TODO:</p> <ul> <li>remove pass and salt from being sent and stored</li> <li>return error when one of the required fields isn't sent</li> </ul>",    "filename": "./index.php",    "groupTitle": "Admin"  },  {    "type": "post",    "url": "/api/validate/login",    "title": "Validate Login",    "name": "PostValidateLogin",    "version": "0.1.0",    "group": "Admin",    "parameter": {      "fields": {        "Parameter": [          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "username",            "description": "<p>Admin's email address.</p>"          },          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "password",            "description": "<p>Admin's password.</p>"          },          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "client_id",            "description": "<p><code>rctrials.tk</code></p>"          },          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "client_secret",            "description": "<p><code>doascience</code></p>"          },          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "scope",            "description": "<p><code>basic</code></p>"          },          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "grant_type",            "description": "<p><code>password</code></p>"          }        ]      }    },    "success": {      "fields": {        "Success 200": [          {            "group": "Success 200",            "type": "String",            "optional": false,            "field": "token_type",            "description": "<p>The value <code>Bearer</code>.</p>"          },          {            "group": "Success 200",            "type": "Number",            "optional": false,            "field": "expires_in",            "description": "<p>An integer representing the TTL of the access token.</p>"          },          {            "group": "Success 200",            "type": "String",            "optional": false,            "field": "access_token",            "description": "<p>A JWT signed with the authorization server’s private key.</p>"          },          {            "group": "Success 200",            "type": "String",            "optional": false,            "field": "refresh_token",            "description": "<p>An encrypted payload that can be used to refresh the access token when it expires.</p>"          }        ]      },      "examples": [        {          "title": "Success-Response:",          "content": "HTTP/1.1 200 OK\n{\n  \"token_type\": \"Bearer\",\n  \"expires_in\": 3600,\n  \"access_token\": \"abc...xyz\",\n  \"refresh_token\": \"abc...xyz\"\n}",          "type": "json"        }      ]    },    "error": {      "fields": {        "Error 4xx": [          {            "group": "Error 4xx",            "optional": false,            "field": "InvalidCredentials",            "description": "<p>The <code>username</code> or <code>password</code> provided are incorrect.</p>"          }        ]      },      "examples": [        {          "title": "Error-Response:",          "content": "HTTP/1.1 401 Unauthorized\n{\n  \"error\": \"invalid_credentials\",\n  \"message\": \"The user credentials were incorrect.\"\n}",          "type": "json"        }      ]    },    "description": "<p>Validates login credentials and returns OAuth access and refresh tokens.</p>",    "filename": "./index.php",    "groupTitle": "Admin"  },  {    "type": "get",    "url": "/api/trial/:tid/surveys",    "title": "Available Surveys",    "name": "GetTrialSurveys",    "version": "0.1.0",    "group": "Subject",    "parameter": {      "fields": {        "Parameter": [          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "uuid",            "description": "<p>Subject ID for whom to list available surveys.</p>"          }        ]      }    },    "success": {      "fields": {        "Success 200": [          {            "group": "Success 200",            "type": "Object",            "optional": false,            "field": "surveys",            "description": "<p>Object containing all the <code>Surveys</code> with <code>Questions</code> available to this <code>Subject</code>.</p>"          }        ]      },      "examples": [        {          "title": "Success-Response:",          "content": "HTTP/1.1 200 OK\n{\n  \"tid\": \"xxxx\",\n  \"sid\": \"#\",\n  \"name\": \"...\",\n  \"pre\": \"0\",\n  \"post\": \"0\",\n  \"during\": \"1\",\n  \"interval\": \"7\",\n  \"frequency\": \"days\",\n  \"questions\": [{\n    \"qid\": \"#\",\n    \"text\": \"...\",\n    \"type\": \"...\",\n    \"options\": \"...|...|...\",\n  },...]\n}",          "type": "json"        }      ]    },    "description": "<p>Returns a list of Surveys from a given Trial ID for a given Subject ID.</p>",    "filename": "./index.php",    "groupTitle": "Subject"  },  {    "type": "get",    "url": "/api/validate/trial/:tid",    "title": "Validate Trial",    "name": "GetValidateTrial",    "version": "0.1.0",    "group": "Subject",    "success": {      "fields": {        "Success 200": [          {            "group": "Success 200",            "type": "number",            "optional": false,            "field": "found",            "description": "<p>Count of trials found matching the Trial ID.</p>"          }        ]      },      "examples": [        {          "title": "Success-Response:",          "content": "HTTP/1.1 200 OK\n{\n  \"found\": 1,\n}",          "type": "json"        }      ]    },    "description": "<p>Returns the count of trials matching the passed Trial ID. If no trials are found matching that ID, then zero (0) is returned.</p>",    "filename": "./index.php",    "groupTitle": "Subject"  },  {    "type": "post",    "url": "/api/register/:tid",    "title": "Register",    "name": "PostRegisterForTrial",    "version": "0.1.0",    "group": "Subject",    "success": {      "fields": {        "Success 200": [          {            "group": "Success 200",            "type": "String",            "optional": false,            "field": "uuid",            "description": "<p>Unique identifier for the new subject.</p>"          },          {            "group": "Success 200",            "type": "Object",            "optional": false,            "field": "surveys",            "description": "<p>Object containing all the pre-intervention <code>Surveys</code> with <code>Questions</code>.</p>"          }        ]      },      "examples": [        {          "title": "Success-Response:",          "content": "HTTP/1.1 200 OK\n{\n  \"uuid\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n  \"surveys\": [...]\n}",          "type": "json"        }      ]    },    "error": {      "fields": {        "Error 4xx": [          {            "group": "Error 4xx",            "optional": false,            "field": "RegistrationClosed",            "description": "<p>The registration window for this trial has closed.</p>"          }        ]      },      "examples": [        {          "title": "Error-Response:",          "content": "HTTP/1.1 410 Gone\n{\n  \"message\": \"The registration window for this trial is closed.\"\n}",          "type": "json"        }      ]    },    "description": "<p>Creates a new <code>Subject</code> in a given <code>Trial</code>, and returns a unique identifier.</p>",    "filename": "./index.php",    "groupTitle": "Subject"  },  {    "type": "post",    "url": "/api/trial/:tid/survey/:sid",    "title": "Survey Answers",    "name": "PostSurveyAnswers",    "version": "0.1.0",    "group": "Subject",    "parameter": {      "fields": {        "Parameter": [          {            "group": "Parameter",            "type": "String",            "optional": false,            "field": "uuid",            "description": "<p>Subject ID for whom to list available surveys.</p>"          },          {            "group": "Parameter",            "type": "Object[]",            "optional": false,            "field": "answers",            "description": "<p>An array of answers to be stored in the database.</p>"          }        ]      },      "examples": [        {          "title": "Request-Example:",          "content": "{\n  \"uuid\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n  \"answers\":[{\n    \"qid\":..., \"answer\":...\n  },...]\n}",          "type": "Object"        }      ]    },    "description": "<p>Stores the Answers to a given Trial and Survey.</p>",    "filename": "./index.php",    "groupTitle": "Subject"  },  {    "success": {      "fields": {        "Success 200": [          {            "group": "Success 200",            "optional": false,            "field": "varname1",            "description": "<p>No type.</p>"          },          {            "group": "Success 200",            "type": "String",            "optional": false,            "field": "varname2",            "description": "<p>With type.</p>"          }        ]      }    },    "type": "",    "url": "",    "version": "0.0.0",    "filename": "./doc/main.js",    "group": "_Users_groupby_Programming_rctrials_api_src_doc_main_js",    "groupTitle": "_Users_groupby_Programming_rctrials_api_src_doc_main_js",    "name": ""  }]
